
        <!DOCTYPE html>
        <html lang="en">
          <head>
            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

            <title>DIF Presentation Exchange</title>
            <link href="./spec-up/css/custom-elements.css" rel="stylesheet">
            <link href="./spec-up/css/prism.css" rel="stylesheet">
            <link href="./spec-up/css/chart.css" rel="stylesheet">
            <link href="./spec-up/css/font-awesome.css" rel="stylesheet">
            <link href="./spec-up/css/index.css" rel="stylesheet">
            <script src="./spec-up/js/custom-elements.js"></script>
          </head>
          <body features="source logo">
            
            <svg id="svg" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <symbol id="github" viewBox="0 0 20 20">
    <path d="M10 0.247c-5.522 0-10 4.477-10 10 0 4.418 2.865 8.167 6.839 9.489 0.5 0.093 0.683-0.217 0.683-0.481 0-0.238-0.009-1.026-0.014-1.862-2.782 0.605-3.369-1.18-3.369-1.18-0.455-1.156-1.11-1.463-1.11-1.463-0.907-0.621 0.069-0.608 0.069-0.608 1.004 0.071 1.533 1.031 1.533 1.031 0.892 1.529 2.339 1.087 2.91 0.831 0.090-0.646 0.349-1.087 0.635-1.337-2.221-0.253-4.556-1.11-4.556-4.942 0-1.092 0.391-1.984 1.030-2.684-0.104-0.252-0.446-1.269 0.097-2.646 0 0 0.84-0.269 2.751 1.025 0.798-0.222 1.653-0.333 2.503-0.337 0.85 0.004 1.706 0.115 2.505 0.337 1.909-1.294 2.747-1.025 2.747-1.025 0.544 1.378 0.202 2.395 0.098 2.646 0.641 0.7 1.029 1.592 1.029 2.684 0 3.841-2.339 4.687-4.566 4.934 0.359 0.31 0.678 0.919 0.678 1.852 0 1.338-0.012 2.415-0.012 2.744 0 0.266 0.18 0.578 0.687 0.48 3.971-1.324 6.833-5.071 6.833-9.488 0-5.523-4.477-10-10-10z"></path>
  </symbol>
  <symbol id="nested_list" viewBox="0 0 37 32">
    <path d="M0 2.286c0-1.262 1.023-2.286 2.286-2.286s2.286 1.023 2.286 2.286c0 1.262-1.023 2.286-2.286 2.286s-2.286-1.023-2.286-2.286zM9.143 0h27.429v4.571h-27.429zM9.143 11.429c0-1.262 1.023-2.286 2.286-2.286s2.286 1.023 2.286 2.286c0 1.262-1.023 2.286-2.286 2.286s-2.286-1.023-2.286-2.286zM18.286 9.143h18.286v4.571h-18.286zM9.143 29.714c0-1.262 1.023-2.286 2.286-2.286s2.286 1.023 2.286 2.286c0 1.262-1.023 2.286-2.286 2.286s-2.286-1.023-2.286-2.286zM18.286 27.429h18.286v4.571h-18.286zM18.286 20.571c0-1.262 1.023-2.286 2.286-2.286s2.286 1.023 2.286 2.286c0 1.262-1.023 2.286-2.286 2.286s-2.286-1.023-2.286-2.286zM27.429 18.286h9.143v4.571h-9.143z"></path>
  </symbol>
</svg>

            <main>

              <header id="header" class="panel-header">
                <span id="toc_toggle" panel-toggle="toc">
                  <svg icon><use xlink:href="#nested_list"></use></svg>
                </span>
                <a id="logo" href="https://identity.foundation">
                  <img src="https://rawcdn.githack.com/decentralized-identity/decentralized-identity.github.io/a3ca39717e440302d1fd99a796e7f00e1c42eb2d/images/logo-flat.svg" />
                </a>
                <span issue-count animate panel-toggle="repo_issues">
                  <svg icon><use xlink:href="#github"></use></svg>
                </span>
              </header>

              <article id="content">
                <h1 id="presentation-exchange"><a class="toc-anchor" href="#presentation-exchange">§</a> Presentation Exchange</h1>
<p><strong>Specification Status:</strong> Strawman</p>
<p><strong>Latest Draft:</strong>
<a href="https://identity.foundation/presentation-exchange">identity.foundation/presentation-exchange</a></p>
<!-- -->
<dl>
<dt><strong>Editors:</strong></dt>
<dd><a href="https://www.linkedin.com/in/dbuchner/">Daniel Buchner</a> (Microsoft)</dd>
<dd><a href="https://www.linkedin.com/in/bzundel/">Brent Zundel</a> (Evernym)</dd>
<dd><a href="https://www.linkedin.com/in/rado0x54/">Martin Riedel</a> (Civic Technologies)</dd>
<dt><strong>Contributors:</strong></dt>
<dd><a href="https://www.linkedin.com/in/cohengabe/">Gabe Cohen</a> (Workday)</dd>
<dd><a href="https://www.linkedin.com/in/or13b/">Orie Steele</a> (Transmute)</dd>
<dd><a href="https://www.linkedin.com/in/waynebuilds/">Wayne Chang</a> (Spruce)</dd>
<dt><strong>Participate:</strong></dt>
<dd><a href="https://github.com/decentralized-identity/presentation-exchange">GitHub repo</a></dd>
<dd><a href="https://github.com/decentralized-identity/presentation-exchange/issues">File a bug</a></dd>
<dd><a href="https://github.com/decentralized-identity/presentation-exchange/commits/master">Commit history</a></dd>
</dl>
<hr>
<h2 id="abstract"><a class="toc-anchor" href="#abstract">§</a> Abstract</h2>
<p>A common activity between peers in identity systems that feature the ability to generate self-asserted and third-party issued claims is the demand and submission of proofs from a Subject to a Verifier. This flow implicitly requires the Subject and Verifier have a known mechanism to facilitate the two primary steps in a proofing exchange: the way Verifiers define the proof requirements, and how Subjects must encode submissions of proof to align with those requirements.</p>
<p>To address these needs, this Presentation Exchange specification codifies the <code>Presentation Definition</code> data format Verifiers can use to articulate proof requirements, as well as the <code>Presentation Submission</code> data format Subjects can use to submit proofs in accordance with them.</p>
<p>This specification does not endeavor to define transport protocols, specific endpoints, or other means for conveying the formatted objects it codifies herein, but it is encouraged that others specifications and projects that do define such mechanisms utilize these data formats within their flows.</p>
<h2 id="status-of-this-document"><a class="toc-anchor" href="#status-of-this-document">§</a> Status of This Document</h2>
<p>Presentation Exchange is a draft specification being developed within the Decentralized Identity Foundation (DIF), and being designed to incorporate the requirements and learnings from related work of the most active industry players into a shared specification that meets the collective needs of the community. This spec will be updated to reflect relevant changes, and participants are encouraged to actively engage on GitHub (see above) and other mediums (e.g. DIF) where this work is being done.</p>
<h2 id="terminology"><a class="toc-anchor" href="#terminology">§</a> Terminology</h2>
<table>
<thead>
<tr>
<th style="text-align:left">Term</th>
<th style="text-align:left">Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Decentralized Identifier (DID)</td>
<td style="text-align:left">Unique ID string and PKI metadata document format for describing the cryptographic keys and other fundamental PKI values linked to a unique, user-controlled, self-sovereign identifier in a target system (i.e. blockchain, distributed ledger).</td>
</tr>
<tr>
<td style="text-align:left">Subject</td>
<td style="text-align:left">The entity that submits proofs to a Verifier to satisfy the requirements described in a Presentation Definition</td>
</tr>
<tr>
<td style="text-align:left">Verifier</td>
<td style="text-align:left">The entity that defines what proofs they require from a Subject (via a Presentation Definition) in order to proceed with an interaction.</td>
</tr>
</tbody>
</table>
<h2 id="presentation-definition"><a class="toc-anchor" href="#presentation-definition">§</a> Presentation Definition</h2>
<p>Presentation Definitions are objects generate to articulate what proofs an entity requires to make a decision about an interaction with a Subject. Presentation Definitions are composed of inputs, which describe the forms and details of the proofs they require, and and optional set of selection rules, to allow Subjects flexibility in cases where many different types of proofs may satisfy an input requirement.</p>
<div id="presentation-definition---all-features-exercised" class="notice example"><a class="notice-link" href="#presentation-definition---all-features-exercised">EXAMPLE</a><pre class="language-json"><code class="language-json">
<span class="token punctuation">{</span>
  <span class="token property">"submission_requirement"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">"Credential issuance requirements"</span><span class="token punctuation">,</span>
    purpose<span class="token operator">:</span> <span class="token string">"Verify banking, employment, and citizenship information."</span><span class="token punctuation">,</span>
    rule<span class="token operator">:</span> <span class="token string">"all"</span><span class="token punctuation">,</span>
    from<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Banking Information"</span><span class="token punctuation">,</span>
        <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"We need to know if you have an established banking history."</span><span class="token punctuation">,</span>
        <span class="token property">"rule"</span><span class="token operator">:</span> <span class="token string">"pick"</span><span class="token punctuation">,</span>
        <span class="token property">"count"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">"from"</span><span class="token operator">:</span> <span class="token string">"A"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Employment Information"</span><span class="token punctuation">,</span>
        <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"We need to know that you are currently employed."</span><span class="token punctuation">,</span>
        <span class="token property">"rule"</span><span class="token operator">:</span> <span class="token string">"all"</span><span class="token punctuation">,</span>
        <span class="token property">"from"</span><span class="token operator">:</span> <span class="token string">"B"</span>
      <span class="token punctuation">}</span>
      <span class="token punctuation">{</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Citizenship Information"</span><span class="token punctuation">,</span>
        <span class="token property">"rule"</span><span class="token operator">:</span> <span class="token string">"pick"</span><span class="token punctuation">,</span>
        <span class="token property">"count"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">"from"</span><span class="token operator">:</span> <span class="token string">"C"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"input_descriptors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"banking_input_1"</span><span class="token punctuation">,</span>
      <span class="token property">"group"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"A"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"schema"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"uri"</span><span class="token operator">:</span> <span class="token string">"https://bank-standards.com/customer.json"</span><span class="token punctuation">,</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Bank Account Information"</span><span class="token punctuation">,</span>
        <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"We need your bank and account information."</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">"constraints"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"fields"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">"path"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"$.issuer"</span><span class="token punctuation">,</span> <span class="token string">"$.vc.issuer"</span><span class="token punctuation">,</span> <span class="token string">"$.iss"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"The credential must be from one of the specified issuers"</span><span class="token punctuation">,</span>
            <span class="token property">"filter"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
              <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"did:example:123|did:example:456"</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token property">"path"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"$.credentialSubject.account[*].account_number"</span><span class="token punctuation">,</span> <span class="token string">"$.vc.credentialSubject.account[*].account_number"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"We need your bank account number for processing purposes"</span><span class="token punctuation">,</span>
            <span class="token property">"filter"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
              <span class="token property">"minLength"</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
              <span class="token property">"maxLength"</span><span class="token operator">:</span> <span class="token number">12</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token property">"path"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"$.credentialSubject.account[*].routing_number"</span><span class="token punctuation">,</span> <span class="token string">"$.vc.credentialSubject.account[*].routing_number"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"You must have an account with a German, US, or Japanese bank account"</span><span class="token punctuation">,</span>
            <span class="token property">"filter"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
              <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"^DE|^US|^JP"</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"banking_input_2"</span><span class="token punctuation">,</span>
      <span class="token property">"group"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"A"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"schema"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"uri"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">"https://bank-schemas.org/1.0.0/accounts.json"</span><span class="token punctuation">,</span>
          <span class="token string">"https://bank-schemas.org/2.0.0/accounts.json"</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Bank Account Information"</span><span class="token punctuation">,</span>
        <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"We need your bank and account information."</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">"constraints"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"fields"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">"path"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"$.issuer"</span><span class="token punctuation">,</span> <span class="token string">"$.vc.issuer"</span><span class="token punctuation">,</span> <span class="token string">"$.iss"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"The credential must be from one of the specified issuers"</span><span class="token punctuation">,</span>
            <span class="token property">"filter"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
              <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"did:example:123|did:example:456"</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> 
            <span class="token property">"path"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"$.credentialSubject.account[*].id"</span><span class="token punctuation">,</span> <span class="token string">"$.vc.credentialSubject.account[*].id"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"We need your bank account number for processing purposes"</span><span class="token punctuation">,</span>
            <span class="token property">"filter"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
              <span class="token property">"minLength"</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
              <span class="token property">"maxLength"</span><span class="token operator">:</span> <span class="token number">12</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token property">"path"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"$.credentialSubject.account[*].route"</span><span class="token punctuation">,</span> <span class="token string">"$.vc.credentialSubject.account[*].route"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"You must have an account with a German, US, or Japanese bank account"</span><span class="token punctuation">,</span>
            <span class="token property">"filter"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
              <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"^DE|^US|^JP"</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"employment_input"</span><span class="token punctuation">,</span>
      <span class="token property">"group"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"B"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"schema"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"uri"</span><span class="token operator">:</span> <span class="token string">"https://business-standards.org/schemas/employment-history.json"</span><span class="token punctuation">,</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Employment History"</span><span class="token punctuation">,</span>
        <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"We need your bank and account information."</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">"constraints"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"fields"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">"path"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"$.jobs[*].active"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"filter"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"boolean"</span><span class="token punctuation">,</span>
              <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"true"</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"citizenship_input_1"</span><span class="token punctuation">,</span>
      <span class="token property">"group"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"C"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"schema"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"uri"</span><span class="token operator">:</span> <span class="token string">"https://eu.com/claims/DriversLicense.json"</span><span class="token punctuation">,</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"EU Driver's License"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">"constraints"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"fields"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">"path"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"$.issuer"</span><span class="token punctuation">,</span> <span class="token string">"$.vc.issuer"</span><span class="token punctuation">,</span> <span class="token string">"$.iss"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"The credential must be from one of the specified issuers"</span><span class="token punctuation">,</span>
            <span class="token property">"filter"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
              <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"did:example:gov1|did:example:gov2"</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token property">"path"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"$.dob"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"filter"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"date"</span><span class="token punctuation">,</span>
              <span class="token property">"minimum"</span><span class="token operator">:</span> <span class="token string">"1999-5-16"</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"citizenship_input_2"</span><span class="token punctuation">,</span>
      <span class="token property">"group"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"C"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"schema"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"uri"</span><span class="token operator">:</span> <span class="token string">"hub://did:foo:123/Collections/schema.us.gov/passport.json"</span><span class="token punctuation">,</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"US Passport"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">"constraints"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"issuers"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"did:foo:gov3"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">"fields"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">"path"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"$.birth_date"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"filter"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"date"</span><span class="token punctuation">,</span>
              <span class="token property">"minimum"</span><span class="token operator">:</span> <span class="token string">"1999-5-16"</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
<p>The following properties are defined for use at the top-level of the resource - all other properties that are not defined below MUST be ignored:</p>
<ul>
<li><code>submission_requirement</code> - The resource <strong><strong>MAY</strong></strong> contain this property,
and if present, its value <strong><strong>MUST</strong></strong> conform to the Submission Requirement
Format. If not present, all inputs listed in the <code>input_descriptor</code> array are
required for submission. The format for this property is described in the
<a href="#submission-requirement"><code>Submission Requirement</code></a> section below.</li>
<li><code>input_descriptors</code> - The resource <strong><strong>MUST</strong></strong> contain this property, and
its value <strong><strong>MUST</strong></strong> be an array of Input Descriptor objects. If no
<code>submission_requirement</code> is present, all inputs listed in the
<code>input_descriptor</code> array are required for submission. The composition of
values under this property are described in the <a href="#input-descriptors"><code>Input Descriptors</code></a> section below.</li>
</ul>
<h3 id="submission-requirement"><a class="toc-anchor" href="#submission-requirement">§</a> Submission Requirement</h3>
<p><em>Presentation Definitions</em> <strong><strong>MAY</strong></strong> include a <em>Submission Requirement</em>,
which defines combinations of inputs that comply with an Issuer or Verifier
flow, such as credential issuance. The <em>Submission Requirement</em> can be
interpreted by a User Agent as instructions on how to present requirement
optionality to the user and submit a valid combination of inputs back via a
<em>Proof Submission</em> object. The following section defines the format for the
<em>Submission Requirement</em> object and the selection syntax used to specify valid
input combinations.</p>
<div id="submission-requirement" class="notice example"><a class="notice-link" href="#submission-requirement">EXAMPLE</a><pre class="language-json"><code class="language-json">  <span class="token property">"submission_requirement"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">"Credential issuance requirements"</span><span class="token punctuation">,</span>
    purpose<span class="token operator">:</span> <span class="token string">"Verify banking, employment, and citizenship information."</span><span class="token punctuation">,</span>
    rule<span class="token operator">:</span> <span class="token string">"all"</span><span class="token punctuation">,</span>
    from<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Banking Information"</span><span class="token punctuation">,</span>
        <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"We need to know if you have an established banking history."</span><span class="token punctuation">,</span>
        <span class="token property">"rule"</span><span class="token operator">:</span> <span class="token string">"pick"</span><span class="token punctuation">,</span>
        <span class="token property">"count"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">"from"</span><span class="token operator">:</span> <span class="token string">"A"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Employment Information"</span><span class="token punctuation">,</span>
        <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"We need to know that you are currently employed."</span><span class="token punctuation">,</span>
        <span class="token property">"rule"</span><span class="token operator">:</span> <span class="token string">"all"</span><span class="token punctuation">,</span>
        <span class="token property">"from"</span><span class="token operator">:</span> <span class="token string">"B"</span>
      <span class="token punctuation">}</span>
      <span class="token punctuation">{</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Citizenship Information"</span><span class="token punctuation">,</span>
        <span class="token property">"rule"</span><span class="token operator">:</span> <span class="token string">"pick"</span><span class="token punctuation">,</span>
        <span class="token property">"count"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">"from"</span><span class="token operator">:</span> <span class="token string">"C"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
</div>
<h4 id="submission-requirement-objects"><a class="toc-anchor" href="#submission-requirement-objects">§</a> Submission Requirement Objects</h4>
<p><em>Submission Requirement Objects</em> describe what combinations of inputs will
satisfy Verifier requires for evaluation in a subsequent <a href="#presentation-submission">Presentation
Submission</a>. <em>Requirement Objects</em> are JSON objects
constructed as follows:</p>
<ol>
<li>
<p>The object <strong><strong>MUST</strong></strong> contain a <code>rule</code> property, and its value
<strong><strong>MUST</strong></strong> be a string matching one of the <a href="#submission-requirement-rules">Submission Requirement
Rules</a> values listed in the section below.</p>
</li>
<li>
<p>The <em>Submission Requirement</em> object <strong><strong>MUST</strong></strong> contain a <code>from</code> property,
and its value <strong><strong>MUST</strong></strong> be one of</p>
<p>(a) A <code>group</code> string matching one or more of the <em>Input Descriptor</em>
objects in the <code>input_descriptors</code></p>
<p>(b) An array of nested <em>Submission Requirement</em> objects.</p>
</li>
<li>
<p>The object <strong><strong>MAY</strong></strong> contain a <code>name</code> property, and if present, its value
<strong><strong>MUST</strong></strong> be a string which <strong><strong>MAY</strong></strong> be
used by a consuming User Agent to display the general name of the
requirement set to a user.</p>
</li>
<li>
<p>The object <strong><strong>MAY</strong></strong> contain a <code>purpose</code> property and, if present, its
value <strong><strong>MUST</strong></strong> be a string that describes the purpose for which the
specified requirement is being asserted.</p>
</li>
<li>
<p>The object <strong><strong>MAY</strong></strong> contain additional properties as required by
<a href="#submission-requirement-rules">Submission Requirement Rules</a>, such as
<code>count</code> for the <code>&quot;pick&quot;</code> rule.</p>
</li>
</ol>
<h4 id="submission-requirement-rules"><a class="toc-anchor" href="#submission-requirement-rules">§</a> Submission Requirement Rules</h4>
<p><a href="#submission-requirement-rules" id="requirement-rules"><em>Submission Requirement
Rules</em></a> are used within
<em>Submission Requirement Objects</em> to describe the specific combinatorial rule
that must be applied to submit a particular subset of required inputs. Rules
are selected by populating the <code>rule</code> property with the corresponding string.
An implementation <strong><strong>MUST</strong></strong> support the following standard types:</p>
<h5 id="all-rule"><a class="toc-anchor" href="#all-rule">§</a> <code>all</code> rule</h5>
<ul>
<li>The <em>Submission Requirement</em> object’s <code>rule</code> property <strong><strong>MUST</strong></strong> contain
the string value <code>&quot;all&quot;</code>.</li>
</ul>
<p>If the <code>from</code> property contains a <code>group</code> string, it directs the consumer of
the <em>Presentation Definition</em> to submit all members of the matching <code>group</code>
string. In the following example, the <code>from</code> property contains a <code>group</code>
string to require all members of group <code>&quot;A&quot;</code>:</p>
<div id="submission-requirement,-all,-group" class="notice example"><a class="notice-link" href="#submission-requirement,-all,-group">EXAMPLE</a><pre class="language-json"><code class="language-json"><span class="token property">"submission_requirement"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Picking all members from group A"</span><span class="token punctuation">,</span>
  <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"We need them all"</span><span class="token punctuation">,</span>
  <span class="token property">"rule"</span><span class="token operator">:</span> <span class="token string">"all"</span><span class="token punctuation">,</span>
  <span class="token property">"from"</span><span class="token operator">:</span> <span class="token string">"A"</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
<p>If the <code>from</code> property contains an array of nested <em>Submission Requirement</em>
objects, it directs the consumer of the <em>Presentation Definition</em> to submit
members such that each nested <em>Submission Requirement</em> object is satisfied. In
the following example, the <code>from</code> property contains an array of nested
<em>Submission Requirement</em> objects to require all members from groups <code>&quot;A&quot;</code>,
<code>&quot;B&quot;</code>, and <code>&quot;C&quot;</code>:</p>
<div id="submission-requirement,-all,-nested" class="notice example"><a class="notice-link" href="#submission-requirement,-all,-nested">EXAMPLE</a><pre class="language-json"><code class="language-json"><span class="token property">"submission_requirement"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Picking all members from groups A, B, and C"</span><span class="token punctuation">,</span>
  <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"We need them all"</span><span class="token punctuation">,</span>
  <span class="token property">"rule"</span><span class="token operator">:</span> <span class="token string">"all"</span><span class="token punctuation">,</span>
  <span class="token property">"from"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token property">"rule"</span><span class="token operator">:</span> <span class="token string">"all"</span><span class="token punctuation">,</span> <span class="token property">"from"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token property">"rule"</span><span class="token operator">:</span> <span class="token string">"all"</span><span class="token punctuation">,</span> <span class="token property">"from"</span><span class="token operator">:</span> <span class="token string">"B"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token property">"rule"</span><span class="token operator">:</span> <span class="token string">"all"</span><span class="token punctuation">,</span> <span class="token property">"from"</span><span class="token operator">:</span> <span class="token string">"C"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
<h5 id="pick-rule"><a class="toc-anchor" href="#pick-rule">§</a> <code>pick</code> rule</h5>
<ul>
<li>The <em>Submission Requirement</em> object’s <code>rule</code> property <strong><strong>MUST</strong></strong> contain
the string value <code>&quot;pick&quot;</code>.</li>
<li>The <em>Submission Requirement</em> object <strong><strong>MUST</strong></strong> contain a <code>count</code> property,
and its value <strong><strong>MUST</strong></strong> be an integer greater than zero.</li>
</ul>
<p>If the <code>from</code> property contains a <code>group</code> string, it directs the consumer of
the <em>Presentation Definition</em> to submit all members of the matching <code>group</code>
string. In the following example, the <code>from</code> property contains a <code>group</code>
string to require a single member of group <code>&quot;B&quot;</code>:</p>
<div id="submission-requirement,-pick,-group" class="notice example"><a class="notice-link" href="#submission-requirement,-pick,-group">EXAMPLE</a><pre class="language-json"><code class="language-json"><span class="token property">"submission_requirement"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Picking one member from group B"</span><span class="token punctuation">,</span>
  <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"We only need one"</span><span class="token punctuation">,</span>
  <span class="token property">"rule"</span><span class="token operator">:</span> <span class="token string">"pick"</span><span class="token punctuation">,</span>
  <span class="token property">"count"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">"from"</span><span class="token operator">:</span> <span class="token string">"B"</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
<p>If the <code>from</code> property contains an array of nested <em>Submission Requirement</em>
objects, it directs the consumer of the <em>Presentation Definition</em> to submit
members such that the number of satisfied <em>Submission Requirement</em> objects is
exactly <code>count</code>. In the following example, the <code>from</code> property contains an
array of nested <em>Submission Requirement</em> objects to require either all members
from group <code>&quot;A&quot;</code> or two members from group <code>&quot;B&quot;</code>:</p>
<div id="submission-requirement,-pick,-nested" class="notice example"><a class="notice-link" href="#submission-requirement,-pick,-nested">EXAMPLE</a><pre class="language-json"><code class="language-json"><span class="token property">"submission_requirement"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Either all from group A or two from group B"</span><span class="token punctuation">,</span>
  <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"Either way works"</span><span class="token punctuation">,</span>
  <span class="token property">"rule"</span><span class="token operator">:</span> <span class="token string">"pick"</span><span class="token punctuation">,</span>
  <span class="token property">"count"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">"from"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token property">"rule"</span><span class="token operator">:</span> <span class="token string">"all"</span><span class="token punctuation">,</span>  <span class="token property">"from"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token property">"rule"</span><span class="token operator">:</span> <span class="token string">"pick"</span><span class="token punctuation">,</span> <span class="token property">"from"</span><span class="token operator">:</span> <span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token property">"count"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
<h4 id="json-schema"><a class="toc-anchor" href="#json-schema">§</a> JSON Schema</h4>
<p>The following JSON Schema Draft 7 definition summarizes many of the
format-related rules above:</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>                                                           
  <span class="token property">"$schema"</span><span class="token operator">:</span> <span class="token string">"http://json-schema.org/draft-07/schema#"</span><span class="token punctuation">,</span>
  <span class="token property">"definitions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>                                               
    <span class="token property">"submission_requirement"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"object"</span><span class="token punctuation">,</span>              
      <span class="token property">"required"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"rule"</span><span class="token punctuation">,</span> <span class="token string">"from"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"properties"</span><span class="token operator">:</span> <span class="token punctuation">{</span>                   
	<span class="token property">"name"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">"rule"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">"count"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"integer"</span><span class="token punctuation">,</span> <span class="token property">"minimum"</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">"from"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	  <span class="token property">"anyOf"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
	    <span class="token punctuation">{</span> <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>                            
	    <span class="token punctuation">{</span>
	      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"array"</span><span class="token punctuation">,</span>
	      <span class="token property">"minItems"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
	      <span class="token property">"items"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">"$ref"</span><span class="token operator">:</span> <span class="token string">"#/definitions/submission_requirement"</span> <span class="token punctuation">}</span>
	    <span class="token punctuation">}</span>
	  <span class="token punctuation">]</span>
	<span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"object"</span><span class="token punctuation">,</span>
  <span class="token property">"properties"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"submission_requirement"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">"$ref"</span><span class="token operator">:</span> <span class="token string">"#/definitions/submission_requirement"</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="property-values-and-evaluation"><a class="toc-anchor" href="#property-values-and-evaluation">§</a> Property Values and Evaluation</h4>
<p>The following property value and evaluation guidelines summarize many of the
processing-related rules above:</p>
<ul>
<li>The <code>rule</code> property value may be either <code>&quot;all&quot;</code> or <code>&quot;pick&quot;</code>.</li>
<li>If the <code>rule</code> property value is <code>&quot;pick&quot;</code>, then the <code>count</code> property must be
present.</li>
<li>The <code>from</code> property must contain either a string representing a <code>group</code> or an
array of nested <em>Submission Requirement</em> objects. In the case of a string
representing a group, the group must match to one or more <em>Input Descriptor</em>
objects within the <code>input_descriptors</code> array.</li>
<li>A <em>Submission Requirement</em> is satisfied with respect to a <em>Presentation
Submission</em>, as defined by the following algorithm:
<ul>
<li>
<p>If <code>from</code> is a string, then the rule refers to a <code>group</code> string defined
within the <em>Input Descriptors</em>, and:</p>
<ul>
<li>
<p>If <code>rule</code> is <code>&quot;all&quot;</code>, then this <em>Submission Requirement</em> is satisfied
if and only if the <em>Presentation Submission</em> entries match all of the
<code>group</code> string’s members.</p>
</li>
<li>
<p>If <code>rule</code> is <code>&quot;pick&quot;</code>, then this <em>Submission Requirement</em> is satisfied
if and only if the number of <em>Presentation Submission</em> entries matching
<code>group</code> string’s members is exactly <code>count</code>.</p>
</li>
</ul>
</li>
<li>
<p>If <code>from</code> is an array of <em>Submission Requirement</em> objects, then the
rule refers to nested requirements, and:</p>
<ul>
<li>If <code>rule is </code>“all”`, then this <em>Submission Requirement</em> is satisfied if
and only if all nested <em>Submission Requirement</em> objects are satisfied.</li>
<li>If <code>rule</code> is <code>&quot;pick&quot;</code>, then this <em>Submission Requirement</em> is satisfied
if and only if the number of satisfied nested <em>Submission Requirement</em>
objects is exactly <code>count</code>.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="input-descriptors"><a class="toc-anchor" href="#input-descriptors">§</a> Input Descriptors</h3>
<p><em>Input Descriptors</em> are objects used to describe the proofing inputs a Verifier requires
of a Subject before they will proceed with an interaction. <em>Input Descriptor Objects</em>
contain a schema URI that links to the schema of the required input data, constraints
on data values, and an explanation why a certain item or set of data is being requested:</p>
<div id="input-descriptor---data" class="notice example"><a class="notice-link" href="#input-descriptor---data">EXAMPLE</a><pre class="language-json"><code class="language-json"><span class="token property">"input_descriptors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"banking_input_1"</span><span class="token punctuation">,</span>
    <span class="token property">"group"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"A"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"schema"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"uri"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"https://bank-schemas.org/1.0.0/accounts.json"</span><span class="token punctuation">,</span>
        <span class="token string">"https://bank-schemas.org/2.0.0/accounts.json"</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Bank Account Information"</span><span class="token punctuation">,</span>
      <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"We need your bank and account information."</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"constraints"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"fields"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">"path"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"$.issuer"</span><span class="token punctuation">,</span> <span class="token string">"$.vc.issuer"</span><span class="token punctuation">,</span> <span class="token string">"$.iss"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"The credential must be from one of the specified issuers"</span><span class="token punctuation">,</span>
          <span class="token property">"filter"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
            <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"did:example:123|did:example:456"</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> 
          <span class="token property">"path"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"$.credentialSubject.account[*].id"</span><span class="token punctuation">,</span> <span class="token string">"$.vc.credentialSubject.account[*].id"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"We need your bank account number for processing purposes"</span><span class="token punctuation">,</span>
          <span class="token property">"filter"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
            <span class="token property">"minLength"</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
            <span class="token property">"maxLength"</span><span class="token operator">:</span> <span class="token number">12</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">"path"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"$.credentialSubject.account[*].route"</span><span class="token punctuation">,</span> <span class="token string">"$.vc.credentialSubject.account[*].route"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"You must have an account with a German, US, or Japanese bank account"</span><span class="token punctuation">,</span>
          <span class="token property">"filter"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
            <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"^DE|^US|^JP"</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre>
</div>
<h4 id="input-descriptor-objects"><a class="toc-anchor" href="#input-descriptor-objects">§</a> Input Descriptor Objects</h4>
<p><em>Input Descriptors</em> are objects that describe what type of input data/credential, or sub-fields thereof, is required for submission to the Verifier. <em>Input Descriptor Objects</em> are composed as follows:</p>
<ul>
<li>The object <strong><strong>MUST</strong></strong> contain an <code>id</code> property. The value of the <code>id</code> property <strong><strong>MUST</strong></strong> be a unique identifying string that does not conflict with the <code>id</code> of another <em>Input Descriptor</em> in the same <em>Presentation Definition</em> object.</li>
<li>The object <strong><strong>MAY</strong></strong> contain a <code>group</code> property, and if present, its value <strong><strong>MUST</strong></strong> match one of the grouping strings listed the <code>from</code> values of a <a href="#requirement-rule-objects"><em>Requirement Rule Object</em></a>.</li>
<li>The object <strong><strong>MUST</strong></strong> contain a <code>schema</code> property, and its value <strong><strong>MUST</strong></strong> be an object composed as follows:
<ul>
<li>The object <strong><strong>MUST</strong></strong> contain a <code>uri</code> property, and its value <strong><strong>MUST</strong></strong> be an array consisting of one or more valid URI strings for the acceptable credential schemas. A common use of multiple entries in the <code>uri</code> array is when multiple versions of a credential schema exist and you wish to express support for submission of more than one version.</li>
<li>The object <strong><strong>MAY</strong></strong> contain a <code>name</code> property, and if present its value <strong><strong>SHOULD</strong></strong> be a human-friendly name that describes what the target schema represents.</li>
<li>The object <strong><strong>MAY</strong></strong> contain a <code>purpose</code> property, and if present its value <strong><strong>MUST</strong></strong> be a string that describes the purpose for which the schema’s data is being requested.</li>
</ul>
</li>
<li>The object <strong><strong>MAY</strong></strong> contain a <code>constraints</code> property, and its value <strong><strong>MUST</strong></strong> be an object composed as follows:
<ul>
<li>The object <strong><strong>MAY</strong></strong> contain a <code>fields</code> property, and its value <strong><strong>MUST</strong></strong> be an array of <a href="#input-descriptor-field-entry"><em>Input Descriptor Field Entry</em></a> objects, each being composed as follows:
<ul>
<li>The object <strong><strong>MUST</strong></strong> contain a <code>path</code> property, and its value <strong><strong>MUST</strong></strong> be an array of one or more <a href="https://goessner.net/articles/JsonPath/">JSONPath</a> string expressions, specifically this variant of JSONPath: <a href="https://www.npmjs.com/package/jsonpath">https://www.npmjs.com/package/jsonpath</a>, that select some subset of values from the target input. The array <strong><strong>MUST</strong></strong> be evaluated from 0-index forward, and the first expressions to return a value will be used for the rest of the entry’s evaluation. The ability to declare multiple expressions this way allows the Verifier to account for format differences - for example: normalizing the differences in structure between JSON-LD/JWT-based <a href="https://www.w3.org/TR/vc-data-model/">Verifiable Credentials</a> and vanilla <a href="https://tools.ietf.org/html/rfc7797">JSON Web Tokens</a> (JWTs).</li>
<li>The object <strong><strong>MAY</strong></strong> contain a <code>purpose</code> property, and if present its value <strong><strong>MUST</strong></strong> be a string that describes the purpose for which the field is being requested.</li>
<li>The object <strong><strong>MAY</strong></strong> contain a <code>filter</code> property, and if present its value <strong><strong>MUST</strong></strong> be <a href="https://json-schema.org/specification.html">JSON Schema</a> descriptor used to filter against the values returned from evaluation of the <a href="https://goessner.net/articles/JsonPath/">JSONPath</a> string expressions in the <code>path</code> array.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="input-evaluation"><a class="toc-anchor" href="#input-evaluation">§</a> Input Evaluation</h3>
<p>A consumer of a <em>Presentation Definition</em> must filter inputs they hold (signed credentials, raw data, etc.) to determine whether they possess the inputs required to fulfill the demands of the Verifying party. A consumer of a <em>Presentation Definition</em> <strong><strong>SHOULD</strong></strong> use the following process to validate whether or not its candidate inputs meet the requirements it describes:</p>
<ol>
<li>For each <em>Input Descriptor</em> in the <code>input_descriptors</code> array of a <em>Presentation Definition</em>, a User Agent <strong><strong>should</strong></strong> compare each candidate input it holds to determine whether there is a match. Evaluate each candidate input as follows:
<ol>
<li>The schema of the candidate input <strong><strong>must</strong></strong> match one of the <em>Input Descriptor</em> <code>schema</code> object <code>uri</code> values exactly. If one of the values is an exact match, proceed, if there are no exact matches, skip to the next candidate input.</li>
<li>If the <code>constraints</code> property of the <em>Input Descriptor</em> is present, and it contains a <code>fields</code> property with one or more <a href="#input-descriptor-field-entry"><em>Input Descriptor Field Entries</em></a>, evaluate each against the candidate input as follows:
<ol>
<li>Iterate the <em>Input Descriptor</em> <code>path</code> array of <a href="https://goessner.net/articles/JsonPath/">JSONPath</a> string expressions from 0-index, executing each expression against the candidate input. Cease iteration at the first expression that returns a matching <em>Field Query Result</em> and use the result for the rest of the field’s evaluation. If no result is returned for any of the expressions, skip to the next candidate input.</li>
<li>If the <code>filter</code> property of the field entry is present, validate the <em>Field Query Result</em> from the step above against the <a href="https://json-schema.org/specification.html">JSON Schema</a> descriptor value. If the result is valid, proceed iterating the rest of the <code>fields</code> entries.</li>
</ol>
</li>
<li>If all of the previous validation steps are successful, mark the candidate input as a match for use in a <em>Presentation Submission</em>, and if present at the top level of the <em>Input Descriptor</em>, keep a relative reference to the <code>group</code> values the input is designated for.</li>
</ol>
</li>
</ol>
<h2 id="presentation-submission"><a class="toc-anchor" href="#presentation-submission">§</a> Presentation Submission</h2>
<blockquote>
<p>NOTE: ensure all the entries in the <code>verifiableCredential</code> array are valid VCs</p>
</blockquote>
<div id="presentation-submission---all-features-exercised" class="notice example"><a class="notice-link" href="#presentation-submission---all-features-exercised">EXAMPLE</a><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"@context"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"https://www.w3.org/2018/credentials/v1"</span><span class="token punctuation">,</span>
    <span class="token string">"https://identity.foundation/presentation-exchange/submission/v1"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"VerifiablePresentation"</span><span class="token punctuation">,</span>
    <span class="token string">"PresentationSubmission"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"presentation_submission"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"descriptor_map"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"banking_input_2"</span><span class="token punctuation">,</span>
        <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"$.verifiableCredential.[0]"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"employment_input"</span><span class="token punctuation">,</span>
        <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"$.verifiableCredential.[1]"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"citizenship_input_1"</span><span class="token punctuation">,</span>
        <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"$.verifiableCredential.[2]"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"verifiableCredential"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token comment">// DECODED JWT PAYLOAD, ASSUME THIS WILL BE A BIG UGLY OBJECT</span>
      <span class="token property">"vc"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"@context"</span><span class="token operator">:</span> <span class="token string">"https://www.w3.org/2018/credentials/v1"</span><span class="token punctuation">,</span>
        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"https://eu.com/claims/DriversLicense"</span><span class="token punctuation">,</span>
        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"EUDriversLicense"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">"issuer"</span><span class="token operator">:</span> <span class="token string">"did:example:123"</span><span class="token punctuation">,</span>
        <span class="token property">"issuanceDate"</span><span class="token operator">:</span> <span class="token string">"2010-01-01T19:73:24Z"</span><span class="token punctuation">,</span>
        <span class="token property">"credentialSubject"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"did:example:ebfeb1f712ebc6f1c276e12ec21"</span><span class="token punctuation">,</span>
          <span class="token property">"accounts"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
              <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"1234567890"</span><span class="token punctuation">,</span>
              <span class="token property">"route"</span><span class="token operator">:</span> <span class="token string">"DE-9876543210"</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"2457913570"</span><span class="token punctuation">,</span>
              <span class="token property">"route"</span><span class="token operator">:</span> <span class="token string">"DE-0753197542"</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">"@context"</span><span class="token operator">:</span> <span class="token string">"https://www.w3.org/2018/credentials/v1"</span><span class="token punctuation">,</span>
      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"https://eu.com/claims/DriversLicense"</span><span class="token punctuation">,</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"EUDriversLicense"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"issuer"</span><span class="token operator">:</span> <span class="token string">"did:foo:123"</span><span class="token punctuation">,</span>
      <span class="token property">"issuanceDate"</span><span class="token operator">:</span> <span class="token string">"2010-01-01T19:73:24Z"</span><span class="token punctuation">,</span>
      <span class="token property">"credentialSubject"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"did:example:ebfeb1f712ebc6f1c276e12ec21"</span><span class="token punctuation">,</span>
        <span class="token property">"license"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">"number"</span><span class="token operator">:</span> <span class="token string">"34DGE352"</span><span class="token punctuation">,</span>
          <span class="token property">"dob"</span><span class="token operator">:</span> <span class="token string">"07/13/80"</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">"proof"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"EcdsaSecp256k1VerificationKey2019"</span><span class="token punctuation">,</span>
        <span class="token property">"created"</span><span class="token operator">:</span> <span class="token string">"2017-06-18T21:19:10Z"</span><span class="token punctuation">,</span>
        <span class="token property">"proofPurpose"</span><span class="token operator">:</span> <span class="token string">"assertionMethod"</span><span class="token punctuation">,</span>
        <span class="token property">"verificationMethod"</span><span class="token operator">:</span> <span class="token string">"https://example.edu/issuers/keys/1"</span><span class="token punctuation">,</span>
        <span class="token property">"jws"</span><span class="token operator">:</span> <span class="token string">"..."</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">"@context"</span><span class="token operator">:</span> <span class="token string">"https://www.w3.org/2018/credentials/v1"</span><span class="token punctuation">,</span>
      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"https://eu.com/claims/DriversLicense"</span><span class="token punctuation">,</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"EUDriversLicense"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"issuer"</span><span class="token operator">:</span> <span class="token string">"did:foo:123"</span><span class="token punctuation">,</span>
      <span class="token property">"issuanceDate"</span><span class="token operator">:</span> <span class="token string">"2010-01-01T19:73:24Z"</span><span class="token punctuation">,</span>
      <span class="token property">"credentialSubject"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"did:example:ebfeb1f712ebc6f1c276e12ec21"</span><span class="token punctuation">,</span>
        <span class="token property">"license"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">"number"</span><span class="token operator">:</span> <span class="token string">"34DGE352"</span><span class="token punctuation">,</span>
          <span class="token property">"dob"</span><span class="token operator">:</span> <span class="token string">"07/13/80"</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">"proof"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"RsaSignature2018"</span><span class="token punctuation">,</span>
        <span class="token property">"created"</span><span class="token operator">:</span> <span class="token string">"2017-06-18T21:19:10Z"</span><span class="token punctuation">,</span>
        <span class="token property">"proofPurpose"</span><span class="token operator">:</span> <span class="token string">"assertionMethod"</span><span class="token punctuation">,</span>
        <span class="token property">"verificationMethod"</span><span class="token operator">:</span> <span class="token string">"https://example.edu/issuers/keys/1"</span><span class="token punctuation">,</span>
        <span class="token property">"jws"</span><span class="token operator">:</span> <span class="token string">"..."</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token property">"proof"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"RsaSignature2018"</span><span class="token punctuation">,</span>
    <span class="token property">"created"</span><span class="token operator">:</span> <span class="token string">"2018-09-14T21:19:10Z"</span><span class="token punctuation">,</span>
    <span class="token property">"proofPurpose"</span><span class="token operator">:</span> <span class="token string">"authentication"</span><span class="token punctuation">,</span>
    <span class="token property">"verificationMethod"</span><span class="token operator">:</span> <span class="token string">"did:example:ebfeb1f712ebc6f1c276e12ec21#keys-1"</span><span class="token punctuation">,</span>
    <span class="token property">"challenge"</span><span class="token operator">:</span> <span class="token string">"1f44d55f-f161-4938-a659-f8026467f126"</span><span class="token punctuation">,</span>
    <span class="token property">"domain"</span><span class="token operator">:</span> <span class="token string">"4jt78h47fh47"</span><span class="token punctuation">,</span>
    <span class="token property">"jws"</span><span class="token operator">:</span> <span class="token string">"..."</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
<h3 id="embedded-presentation-submission-object"><a class="toc-anchor" href="#embedded-presentation-submission-object">§</a> Embedded Presentation Submission Object</h3>
<p><em>Presentation Submissions</em> are objects embedded within target credential negotiation formats that unify the presentation of proofs to a Verifier in accordance with the requirements a Verifier specified in a <em>Presentation Definition</em>. Embedded <em>Presentation Submission</em> objects <strong><strong>MUST</strong></strong> be located within target data format as a <code>presentation_submission</code> property, which are composed as follows:</p>
<ul>
<li>The object <strong><strong>MUST</strong></strong> include a <code>descriptor_map</code> property, and its value <strong><strong>MUST</strong></strong> be an array of <em>Input Descriptor Mapping Objects</em>, each being composed as follows:
<ul>
<li>The object <strong><strong>MUST</strong></strong> include an <code>id</code> property, and its value <strong><strong>MUST</strong></strong> be a string matching the <code>id</code> property of the <em>Input Descriptor</em> in the <em>Presentation Definition</em> the submission is related to.</li>
<li>The object <strong><strong>MUST</strong></strong> include a <code>path</code> property, and its value <strong><strong>MUST</strong></strong> be a <a href="https://goessner.net/articles/JsonPath/">JSONPath</a> string expression that selects the credential to be submit in relation to the identified <em>Input Descriptor</em> identified, when executed against the top-level of the object the <em>Presentation Submission</em> is embedded within.</li>
</ul>
</li>
</ul>
<h3 id="embed-targets"><a class="toc-anchor" href="#embed-targets">§</a> Embed Targets</h3>
<p>The following section details where the <em>Presentation Submission</em> is to be embedded within a target data structure, as well as how to formulate the <a href="https://goessner.net/articles/JsonPath/">JSONPath</a> expressions to select the credentials within the target data structure.</p>
<h4 id="oidc"><a class="toc-anchor" href="#oidc">§</a> OIDC</h4>
<div id="presentation-submission-with-oidc-jwt" class="notice example"><a class="notice-link" href="#presentation-submission-with-oidc-jwt">EXAMPLE</a><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"iss"</span><span class="token operator">:</span> <span class="token string">"https://self-issued.me"</span><span class="token punctuation">,</span>
  <span class="token property">"sub"</span><span class="token operator">:</span> <span class="token string">"248289761001"</span><span class="token punctuation">,</span>
  <span class="token property">"preferred_username"</span><span class="token operator">:</span> <span class="token string">"superman445"</span><span class="token punctuation">,</span>
  <span class="token property">"presentation_submission"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"descriptor_map"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"banking_input_2"</span><span class="token punctuation">,</span>
        <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"$._claim_sources.banking_input_2.JWT"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"employment_input"</span><span class="token punctuation">,</span>
        <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"$._claim_sources.employment_input.VC_JWT"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"citizenship_input_1"</span><span class="token punctuation">,</span>
        <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"$._claim_sources.citizenship_input_1.VC"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"_claim_names"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"verified_claims"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">"banking_input_2"</span><span class="token punctuation">,</span>
      <span class="token string">"employment_input"</span><span class="token punctuation">,</span>
      <span class="token string">"citizenship_input_1"</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"_claim_sources"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"banking_input_2"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"JWT"</span><span class="token operator">:</span> "eyJhbGciOiJSUzI<span class="token number">1</span>NiIsInR<span class="token number">5</span>cCI<span class="token number">6</span>IkpXVCJ<span class="token number">9.</span>eyJpc<span class="token number">3</span>MiOiJodHRwcz
      ovL<span class="token number">3</span>NlcnZlci<span class="token number">5</span>vdGhlcm<span class="token number">9</span>wLmNvbSIsInN<span class="token number">1</span>YiI<span class="token number">6</span>ImU<span class="token number">4</span>MTQ<span class="token number">4</span>NjAzLTg<span class="token number">5</span>MzQtNDI<span class="token number">0</span>N
      S<span class="token number">04</span>MjViLWMxMDhiOGI<span class="token number">2</span>Yjk<span class="token number">0</span>NSIsInZlcmlmaWVkX<span class="token number">2</span>NsYWltcyI<span class="token number">6</span>eyJ<span class="token number">2</span>ZXJpZmlj
      YXRpb<span class="token number">24</span>iOnsidHJ<span class="token number">1</span>c<span class="token number">3</span>RfZnJhbWV<span class="token number">3</span>b<span class="token number">3</span>JrIjoiaWFsX<span class="token number">2</span>V<span class="token number">4</span>YW<span class="token number">1</span>wbGVfZ<span class="token number">29</span>sZCJ<span class="token number">9</span>LCJ
      jbGFpbXMiOnsiZ<span class="token number">2</span>l<span class="token number">2</span>ZW<span class="token number">5</span>fbmFtZSI<span class="token number">6</span>Ik<span class="token number">1</span>heCIsImZhbWlseV<span class="token number">9</span>uYW<span class="token number">1</span>lIjoiTWVpZX
      IiLCJiaXJ<span class="token number">0</span>aGRhdGUiOiIxOTU<span class="token number">2</span>LTAxLTI<span class="token number">4</span>In<span class="token number">19</span>fQ.FArlPUtUVn<span class="token number">95</span>HCExePlWJQ
      <span class="token number">6</span>ctVfVpQyeSbe<span class="token number">3</span>xkH<span class="token number">9</span>MH<span class="token number">1</span>QJjnk<span class="token number">5</span>GVbBW<span class="token number">0</span>qe<span class="token number">1</span>b<span class="token number">7</span>R<span class="token number">3</span>lE<span class="token number">-8</span>iVv__<span class="token number">0</span>mhRTUI<span class="token number">5</span>lcFhLj
      oGjDS<span class="token number">8</span>zgWSarVsEEjwBK<span class="token number">7</span>WD<span class="token number">3</span>r<span class="token number">9</span>cEw<span class="token number">6</span>ZAhfEkhHL<span class="token number">9</span>eqAaED<span class="token number">2</span>rhhDbHD<span class="token number">5</span>dZWXkJCu
      XIcn<span class="token number">65</span>g<span class="token number">6</span>rryiBanxlXK<span class="token number">0</span>ZmcK<span class="token number">4</span>fD<span class="token number">9</span>HV<span class="token number">9</span>MFduk<span class="token number">0</span>LRG_p<span class="token number">4</span>yocMaFvVkqawat<span class="token number">5</span>NV<span class="token number">9</span>QQ
      <span class="token number">3</span>ij<span class="token number">7</span>UBr<span class="token number">3</span>G<span class="token number">7</span>A<span class="token number">4</span>FojcKEkoJKScdGoozir<span class="token number">8</span>m<span class="token number">5</span>XD<span class="token number">83</span>Sn<span class="token number">45</span>_<span class="token number">79</span>nCcgWSnCX<span class="token number">2</span>QTukL<span class="token number">8</span>Ny
      wIItu_K<span class="token number">48</span>cjHiAGXXSzydDm_ccGCe<span class="token number">0</span>sY-Ai<span class="token number">2</span>-iFFuQo<span class="token number">2</span>PtfuK<span class="token number">2</span>SqPPmAZJxEFrF
      oLY<span class="token number">4</span>g"
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"employment_input"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"VC_JWT"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// DECODED JWT PAYLOAD, ASSUME THIS WILL BE A BIG UGLY OBJECT</span>
        <span class="token property">"vc"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">"@context"</span><span class="token operator">:</span> <span class="token string">"https://www.w3.org/2018/credentials/v1"</span><span class="token punctuation">,</span>
          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"https://eu.com/claims/DriversLicense"</span><span class="token punctuation">,</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"EUDriversLicense"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token property">"issuer"</span><span class="token operator">:</span> <span class="token string">"did:example:123"</span><span class="token punctuation">,</span>
          <span class="token property">"issuanceDate"</span><span class="token operator">:</span> <span class="token string">"2010-01-01T19:73:24Z"</span><span class="token punctuation">,</span>
          <span class="token property">"credentialSubject"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"did:example:ebfeb1f712ebc6f1c276e12ec21"</span><span class="token punctuation">,</span>
            <span class="token property">"accounts"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token punctuation">{</span>
                <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"1234567890"</span><span class="token punctuation">,</span>
                <span class="token property">"route"</span><span class="token operator">:</span> <span class="token string">"DE-9876543210"</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token punctuation">{</span>
                <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"2457913570"</span><span class="token punctuation">,</span>
                <span class="token property">"route"</span><span class="token operator">:</span> <span class="token string">"DE-0753197542"</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"citizenship_input_1"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"VC"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"@context"</span><span class="token operator">:</span> <span class="token string">"https://www.w3.org/2018/credentials/v1"</span><span class="token punctuation">,</span>
        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"https://eu.com/claims/DriversLicense"</span><span class="token punctuation">,</span>
        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"EUDriversLicense"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">"issuer"</span><span class="token operator">:</span> <span class="token string">"did:foo:123"</span><span class="token punctuation">,</span>
        <span class="token property">"issuanceDate"</span><span class="token operator">:</span> <span class="token string">"2010-01-01T19:73:24Z"</span><span class="token punctuation">,</span>
        <span class="token property">"credentialSubject"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"did:example:ebfeb1f712ebc6f1c276e12ec21"</span><span class="token punctuation">,</span>
          <span class="token property">"license"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">"number"</span><span class="token operator">:</span> <span class="token string">"34DGE352"</span><span class="token punctuation">,</span>
            <span class="token property">"dob"</span><span class="token operator">:</span> <span class="token string">"07/13/80"</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">"proof"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"EcdsaSecp256k1VerificationKey2019"</span><span class="token punctuation">,</span>
          <span class="token property">"created"</span><span class="token operator">:</span> <span class="token string">"2017-06-18T21:19:10Z"</span><span class="token punctuation">,</span>
          <span class="token property">"proofPurpose"</span><span class="token operator">:</span> <span class="token string">"assertionMethod"</span><span class="token punctuation">,</span>
          <span class="token property">"verificationMethod"</span><span class="token operator">:</span> <span class="token string">"https://example.edu/issuers/keys/1"</span><span class="token punctuation">,</span>
          <span class="token property">"jws"</span><span class="token operator">:</span> <span class="token string">"..."</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
<h4 id="did-comms"><a class="toc-anchor" href="#did-comms">§</a> DID Comms</h4>
<p>…</p>
<h4 id="chapi"><a class="toc-anchor" href="#chapi">§</a> CHAPI</h4>
<p>…</p>
<h2 id="transport-integrations"><a class="toc-anchor" href="#transport-integrations">§</a> Transport Integrations</h2>
<h3 id="chapi-2"><a class="toc-anchor" href="#chapi-2">§</a> CHAPI</h3>
<p>The <a href="https://w3c-ccg.github.io/credential-handler-api/">credential handler api (CHAPI)</a> allows a web page to request data from a browser, and for a wallet to fulfill that request. This is commonly used for requesting and presenting verifiable credentials.</p>
<p>See also the <a href="https://digitalbazaar.github.io/vp-request-spec/">vp-request-spec</a>.</p>
<p>Here is an example of a request:</p>
<div id="presentation-definition-using-chapi" class="notice example"><a class="notice-link" href="#presentation-definition-using-chapi">EXAMPLE</a><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"PresentationDefinitionQuery"</span><span class="token punctuation">,</span>
      <span class="token property">"presentationDefinitionQuery"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// Presentation Definition goes here.</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
<p>Here is an example of a response:</p>
<div id="presentation-submission-using-chapi" class="notice example"><a class="notice-link" href="#presentation-submission-using-chapi">EXAMPLE</a><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"web"</span><span class="token punctuation">,</span>
  <span class="token property">"dataType"</span><span class="token operator">:</span> <span class="token string">"VerifiablePresentation"</span><span class="token punctuation">,</span>
  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// Presentation Submission goes here</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
<h2 id="appendix"><a class="toc-anchor" href="#appendix">§</a> Appendix</h2>
<h3 id="goals-requirements"><a class="toc-anchor" href="#goals-requirements">§</a> Goals &amp; Requirements</h3>
<p>The <code>Presentation Definition</code> data format should satisfy the following requirements:</p>
<ol>
<li>A <code>Presentation Definition</code> allows for a static definition. That means it is not necessarely required to be dynamically created by a party upon request.</li>
<li>A <code>Presentation Definition</code> should <em>generally</em> not have a limited TTL or be restricted to a single interaction. It should a long-lived format that, for example, search indexers could pickup in order to understand service requirements.</li>
<li>A <code>Presentation Definition</code> allows to specifiy a combination of selection criteria that meet the requirements. A <code>Presentation Definition</code> can meet any combination of the requirements given.</li>
<li>A <code>Presentation Definition</code> can request verifiable (signed) information as well as unsigned information (TBD).</li>
<li>A <code>Presentation Definition</code> allows for the inclusive definition of an input selection, but not an exclusive on. (e.g. A and/or B. but not A but not B).</li>
</ol>
<p>The <code>Presentation Submission</code> data format should satisfy the following requirements:</p>
<ol>
<li>A <code>Presentation Submission</code> is the submission of a W3C Verifiable Presentation of extended capabilities to reference an earlier <code>Presentation Definition</code>.</li>
<li>A <code>Presentation Submission</code> supports the direct reference to an <code>input descriptor</code> of a <code>Presentation Definition</code>. (“I represent value XY, e.g. a verifiable Bank Account”)</li>
<li>A <code>Presentation Submission</code> supports the direct reference to an <code>input selector</code> of a <code>Presentation Definition</code> (“I satisfy condition A and B”)</li>
</ol>

              </article>    

            </main>

            <slide-panels id="slidepanels">
              <slide-panel id="repo_issues" options="right">
                <header class="panel-header">
                  <span>
                    <svg icon><use xlink:href="#github"></use></svg>
                    <span issue-count></span>
                  </span>
                  <span class="repo-issue-toggle" panel-toggle="repo_issues">✕</span>
                </header>
                <ul id="repo_issue_list"></ul>
              </slide-panel>

              <slide-panel id="toc">
                <header class="panel-header">
                  <span>Table of Contents</span>
                  <span panel-toggle="toc">✕</span>
                </header>
                <div id="toc_list">
                  <ul class="toc">
<li><a href="#abstract">Abstract</a></li>
<li><a href="#status-of-this-document">Status of This Document</a></li>
<li><a href="#terminology">Terminology</a></li>
<li><a href="#presentation-definition">Presentation Definition</a>
<ul>
<li><a href="#submission-requirement">Submission Requirement</a>
<ul>
<li><a href="#submission-requirement-objects">Submission Requirement Objects</a></li>
<li><a href="#submission-requirement-rules">Submission Requirement Rules</a></li>
<li><a href="#json-schema">JSON Schema</a></li>
<li><a href="#property-values-and-evaluation">Property Values and Evaluation</a></li>
</ul>
</li>
<li><a href="#input-descriptors">Input Descriptors</a>
<ul>
<li><a href="#input-descriptor-objects">Input Descriptor Objects</a></li>
</ul>
</li>
<li><a href="#input-evaluation">Input Evaluation</a></li>
</ul>
</li>
<li><a href="#presentation-submission">Presentation Submission</a>
<ul>
<li><a href="#embedded-presentation-submission-object">Embedded Presentation Submission Object</a></li>
<li><a href="#embed-targets">Embed Targets</a>
<ul>
<li><a href="#oidc">OIDC</a></li>
<li><a href="#did-comms">DID Comms</a></li>
<li><a href="#chapi">CHAPI</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#transport-integrations">Transport Integrations</a>
<ul>
<li><a href="#chapi-2">CHAPI</a></li>
</ul>
</li>
<li><a href="#appendix">Appendix</a>
<ul>
<li><a href="#goals-requirements">Goals &amp; Requirements</a></li>
</ul>
</li>
</ul>

                </div>
              </slide-panel>
              
            </slide-panels>

          </body>
          <script>window.specConfig = {"title":"DIF Presentation Exchange","spec_directory":"./spec/","output_path":"./","logo":"https://rawcdn.githack.com/decentralized-identity/decentralized-identity.github.io/a3ca39717e440302d1fd99a796e7f00e1c42eb2d/images/logo-flat.svg","logo_link":"https://identity.foundation","source":{"host":"github","account":"decentralized-identity","repo":"presentation-exchange"},"destination":"./","destinationResourcePrefix":"./","rootResourcePrefix":"./"}</script>
          <script src="./spec-up/js/markdown-it.js"></script>
          <script src="./spec-up/js/prism.js" data-manual></script>
          <script src="./spec-up/js/mermaid.js"></script>
          <script src="./spec-up/js/chart.js"></script>
          <script src="./spec-up/js/index.js"></script>
        </html>
      